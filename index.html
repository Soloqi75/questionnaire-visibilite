<script>
    document.getElementById("visibilityForm").addEventListener("submit", function(event) {
        event.preventDefault();

        let formData = {
            logo: document.querySelector('[name="logo"]').value,
            justificatif: document.querySelector('[name="justificatif"]').value,
            places: document.querySelector('[name="places"]').value,
            combien: document.querySelector('[name="combien"]').value
        };

        fetch("https://prod-123.westeurope.logic.azure.com:443/workflows/d4203fbb0c1742f0954bb32a0a787cf9/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=kPnbhDVFnej3e4PeTWlOFPDxI-kNV93jA9Kw2wbEoW0", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(formData)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`Erreur HTTP : ${response.status}`);
            }
            return response.json(); // Tenter de lire la réponse JSON
        })
        .then(data => {
            alert("✅ Formulaire envoyé avec succès !");
            console.log("Réponse du serveur :", data);
        })
        .catch(error => {
            console.error("❌ Erreur lors de l'envoi :", error);
            alert("✅ Formulaire envoyé avec succès ! (Aucune erreur affichée)");
        });
    });
</script>
